<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Ultra Spotify Visualizer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <link rel="stylesheet" href="./styles.css" />
    <meta name="color-scheme" content="dark light" />
  </head>
  <body>
    <canvas id="visualizer"></canvas>

    <main id="app">
      <header>
        <h1>Ultra Spotify Visualizer</h1>
        <div id="actions">
          <button id="settings-btn" class="ghost" aria-label="Open settings" title="Settings">‚öôÔ∏è</button>
          <div id="auth">
            <button id="login-btn" class="primary">Log in with Spotify</button>
            <button id="logout-btn" class="ghost" hidden>Log out</button>
          </div>
        </div>
      </header>

      <section id="user" hidden>
        <img id="user-avatar" alt="" />
        <div>
          <div id="user-name"></div>
          <div id="user-product" class="badge"></div>
        </div>
      </section>

      <section id="player" hidden>
        <div id="track">
          <img id="album-art" alt="Album Art" />
          <div class="meta">
            <div id="track-name" class="title">‚Äî</div>
            <div id="track-artist" class="subtitle">‚Äî</div>
            <div id="track-album" class="subtitle muted">‚Äî</div>
          </div>
        </div>

        <div id="controls">
          <button id="prev" title="Previous">‚èÆ</button>
          <button id="play" title="Play/Pause">‚èØ</button>
          <button id="next" title="Next">‚è≠</button>
          <div id="time">
            <span id="elapsed">0:00</span>
            <input type="range" id="seek" min="0" max="1000" value="0" />
            <span id="duration">0:00</span>
          </div>
          <div id="volume">
            üîä
            <input type="range" id="volume-slider" min="0" max="100" value="50" />
          </div>
        </div>

        <div id="status" class="muted"></div>
      </section>

      <footer>
        <p class="muted small">
          Spotify Premium is required for in-browser playback using the Web Playback SDK. Visuals adapt to album colors and track tempo/energy.
        </p>
      </footer>
    </main>

    <!-- Global config MUST load before app.js so SPOTIFY_CLIENT_ID is defined -->
    <script src="./config.js"></script>
    <!-- Spotify Web Playback SDK -->
    <script async src="https://sdk.scdn.co/spotify-player.js"></script>
    <!-- App (module) -->
    <script type="module" src="./app.js"></script>
  </body>
</html>